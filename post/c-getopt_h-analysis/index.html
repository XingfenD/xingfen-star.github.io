<!DOCTYPE html>
<html lang="zh" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="Introduction to getopt.h getopt.h is an embedded library of c language to handle command line arguments. It&rsquo;s function can be accessed by calling the two functions below: getopt() getopt_long() Function getopt() Function getopt() is used to parse instructions which have only short options like -g, -o, -f. Example program of getopt() The arguments-handling framework using getopt() is basicly below: #include &lt;stdio.h&gt; #include &lt;getopt.h&gt; int main(int argc, char *argv[]) { int opt; /* parse the command line input */ while ((opt = getopt(argc, argv, &#34;f:o:kh&#34;)) !">
<title>How to parse arguments using getopt.h</title>

<link rel='canonical' href='https://xingfend.github.io/xingfen-star.github.io/post/c-getopt_h-analysis/'>

<link rel="stylesheet" href="/xingfen-star.github.io/scss/style.min.c0fa910106829adb3edb67524eba5dffc21500fdd220ea53e6ba412a6f0ce2fe.css"><meta property='og:title' content="How to parse arguments using getopt.h">
<meta property='og:description' content="Introduction to getopt.h getopt.h is an embedded library of c language to handle command line arguments. It&rsquo;s function can be accessed by calling the two functions below: getopt() getopt_long() Function getopt() Function getopt() is used to parse instructions which have only short options like -g, -o, -f. Example program of getopt() The arguments-handling framework using getopt() is basicly below: #include &lt;stdio.h&gt; #include &lt;getopt.h&gt; int main(int argc, char *argv[]) { int opt; /* parse the command line input */ while ((opt = getopt(argc, argv, &#34;f:o:kh&#34;)) !">
<meta property='og:url' content='https://xingfend.github.io/xingfen-star.github.io/post/c-getopt_h-analysis/'>
<meta property='og:site_name' content='ËøúÊ•í'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='cËØ≠Ë®Ä' /><meta property='article:published_time' content='2025-01-22T13:29:03&#43;08:00'/><meta property='article:modified_time' content='2026-01-08T09:59:27&#43;00:00'/>
<meta name="twitter:title" content="How to parse arguments using getopt.h">
<meta name="twitter:description" content="Introduction to getopt.h getopt.h is an embedded library of c language to handle command line arguments. It&rsquo;s function can be accessed by calling the two functions below: getopt() getopt_long() Function getopt() Function getopt() is used to parse instructions which have only short options like -g, -o, -f. Example program of getopt() The arguments-handling framework using getopt() is basicly below: #include &lt;stdio.h&gt; #include &lt;getopt.h&gt; int main(int argc, char *argv[]) { int opt; /* parse the command line input */ while ((opt = getopt(argc, argv, &#34;f:o:kh&#34;)) !">
    <link rel="shortcut icon" href="/xingfen-star.github.io/favicon.ico" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/xingfen-star.github.io/">
                
                    

                    
                        
                        <img src="/xingfen-star.github.io/img/avatar_hu493e02d3d92a93d51eb4b2df9911732e_131869_300x0_resize_box_3.png" width="300"
                            height="279" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üòâ</span>
                
            </figure>
            
        

        <div class="site-meta">
            <h1 class="site-name"><a href="/xingfen-star.github.io">ËøúÊ•í</a></h1>
            <h2 class="site-description">ÊòüÂàÜ.</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a
                        href='https://space.bilibili.com/473214036'
                        target="_blank"
                        title="Bilibili"
                        rel="me"
                    >
                        
                        
                            <svg class="icon" style="width: 24;height: 24;vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 2299 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1461"><path d="M1775.840814 322.588002c6.0164 1.002733 53.144869-9.525967 55.150336-6.016401 3.0082 4.5123 24.065601 155.92504 18.550567 156.927774s-44.621635 10.027334-44.621635 10.027334c-3.0082-20.556034-28.577901-147.903173-29.079268-160.938707m75.205003-14.539634l20.556034 162.944174c10.5287-0.501367 53.144869-3.509567 57.155803-4.010934-6.0164-61.668103-16.545101-158.933241-16.545101-158.93324-20.054668-4.010934-41.112069-4.010934-61.166736 0m-40.610702 226.116376s92.752838-23.564234 126.344406-12.0328c17.046467 61.668103 48.131202 407.611118 51.139402 421.649386-21.057401 2.506833-90.246004 8.523234-95.761037 10.027333-4.5123-26.071068-81.72277-403.098818-81.722771-419.643919m343.436183-207.565809c5.515034 1.5041 54.648969-5.013667 55.150335-1.5041 1.002733 12.032801 6.0164 157.42914 0.501367 157.930507s-44.621635 4.010934-44.621635 4.010934c-1.002733-20.054668-12.032801-146.90044-11.030067-160.437341m75.70637-4.010933l4.010933 160.938707c10.5287 0 52.643502 2.506833 57.155803 2.005467-1.002733-61.668103 0-158.933241 0-158.933241-20.054668-3.509567-40.610702-5.013667-61.166736-4.010933m-64.676303 216.089043s94.758304-12.534167 126.845772 2.506833c7.019134 72.196803 6.0164 408.613852 7.019134 422.652119-21.558768 0-90.246004 1.002733-95.761038 2.005467-1.002733-26.071068-39.607968-410.619319-38.103868-427.164419m-220.099977-413.627519c54.648969 278.759879 96.262404 755.058234 97.766504 785.641602 0 0 43.117535 1.002733 91.750105 4.010934C2105.740095 614.383415 2070.644427 134.575493 2071.145794 119.033126c-12.032801-13.536901-126.344406 6.0164-126.344406 6.0164m-120.328005 659.297196c-10.5287-78.213204-290.291313-166.955108-447.720454-138.377206 0 0-19.553301-172.470141-27.073801-339.425248-6.517767-143.390873-1.002733-282.770813 0.501366-305.833681-10.5287-7.5205-123.837572 46.627102-185.004308 69.188603 0 0 73.199537 309.844614 126.344406 952.59671 0 0 84.730971 9.0246 230.12731-19.051934s317.365114-115.815705 302.825481-219.097244m-341.932083 140.88404l-24.566967-176.982441c6.0164-3.0082 156.927774 53.144869 172.971507 63.172203-2.506833 11.030067-148.40454 113.810238-148.40454 113.810238M610.664628 322.588002c6.0164 1.002733 53.144869-9.525967 55.150335-6.016401 3.0082 4.5123 24.065601 155.92504 18.550568 156.927774s-44.621635 10.027334-44.621635 10.027334c-3.0082-20.556034-28.577901-147.903173-29.079268-160.938707m75.205003-14.539634l20.556034 162.944174c10.5287-0.501367 53.144869-3.509567 57.155803-4.010934-6.517767-61.668103-16.545101-158.933241-16.545101-158.93324-20.054668-4.010934-41.112069-4.010934-61.166736 0m-40.610702 226.116376s92.752838-23.564234 126.344406-12.0328c17.046467 61.668103 48.131202 407.611118 51.139402 421.649386-21.057401 2.506833-90.246004 8.523234-95.761037 10.027333-4.5123-26.071068-81.72277-403.098818-81.722771-419.643919m343.436182-207.565809c5.515034 1.5041 54.648969-5.013667 55.150336-1.5041 1.002733 12.032801 6.0164 157.42914 0.501367 157.930507s-44.621635 4.010934-44.621635 4.010934c-1.002733-20.054668-11.531434-146.90044-11.030068-160.437341m75.706371-4.010933l4.010933 160.938707c10.5287 0 52.643502 2.506833 57.155803 2.005467-1.002733-61.668103 0-158.933241 0-158.933241-20.054668-3.509567-40.610702-4.5123-61.166736-4.010933m-64.676303 216.089043s94.758304-12.534167 126.845772 2.506833c7.019134 72.196803 6.0164 408.613852 7.019134 422.652119-21.558768 0-90.246004 1.002733-95.761038 2.005467-0.501367-26.071068-39.607968-410.619319-38.103868-427.164419m-220.099977-413.627519c54.648969 278.759879 96.262404 755.058234 97.766504 785.641602 0 0 43.117535 1.002733 91.750105 4.010934-28.577901-300.318647-63.67357-780.126569-63.172203-796.170303-12.032801-13.035534-126.344406 6.517767-126.344406 6.517767m-120.328005 659.297196c-10.5287-78.213204-290.291313-166.955108-447.720454-138.377206 0 0-19.553301-172.470141-27.073801-339.425248-6.517767-143.390873-1.002733-282.770813 0.501366-305.833681C174.475608-6.308547 61.166736 47.337689 0 69.89919c0 0 73.199537 309.844614 126.344406 952.59671 0 0 84.730971 9.0246 230.12731-19.051934s317.365114-115.815705 302.825481-219.097244m-341.932083 140.88404l-24.566967-176.982441c6.0164-3.0082 156.927774 53.144869 172.971507 63.172203-2.506833 11.030067-148.40454 113.810238-148.40454 113.810238" p-id="1462"></path></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a
                        href='https://github.com/xingfend'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <?xml version="1.0" encoding="UTF-8"?><svg width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M29.3444 30.4765C31.7481 29.977 33.9292 29.1108 35.6247 27.8391C38.5202 25.6676 40 22.3136 40 18.9999C40 16.6752 39.1187 14.505 37.5929 12.6668C36.7427 11.6425 39.2295 3.99989 37.02 5.02919C34.8105 6.05848 31.5708 8.33679 29.8726 7.83398C28.0545 7.29565 26.0733 6.99989 24 6.99989C22.1992 6.99989 20.4679 7.22301 18.8526 7.6344C16.5046 8.23237 14.2591 5.99989 12 5.02919C9.74086 4.05848 10.9736 11.9632 10.3026 12.7944C8.84119 14.6051 8 16.7288 8 18.9999C8 22.3136 9.79086 25.6676 12.6863 27.8391C14.6151 29.2857 17.034 30.2076 19.7401 30.6619" stroke="#707070" stroke-width="4" stroke-linecap="round"/><path d="M19.7397 30.6619C18.5812 31.937 18.002 33.1478 18.002 34.2944C18.002 35.441 18.002 38.3464 18.002 43.0106" stroke="#707070" stroke-width="4" stroke-linecap="round"/><path d="M29.3446 30.4766C30.4423 31.9174 30.9912 33.211 30.9912 34.3576C30.9912 35.5042 30.9912 38.3885 30.9912 43.0107" stroke="#707070" stroke-width="4" stroke-linecap="round"/><path d="M6 31.2155C6.89887 31.3254 7.56554 31.7387 8 32.4554C8.65169 33.5303 11.0742 37.518 13.8251 37.518C15.6591 37.518 17.0515 37.518 18.0024 37.518" stroke="#707070" stroke-width="4" stroke-linecap="round"/></svg>
                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/xingfen-star.github.io/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>‰∏ªÈ°µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/xingfen-star.github.io/page/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>ÂΩíÊ°£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/xingfen-star.github.io/page/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>ÊêúÁ¥¢</span>
            </a>
        </li>
        
        
        <li >
            <a href='/xingfen-star.github.io/page/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>ÂÖ≥‰∫é</span>
            </a>
        </li>
        
        
        <li >
            <a href='/xingfen-star.github.io/page/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>ÈìæÊé•</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>Dark Mode</span>
                    </li>
                
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>

        <div class="widget--toc">
            <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction-to-getopth">Introduction to <code>getopt.h</code></a>
      <ul>
        <li><a href="#function-getopt">Function <code>getopt()</code></a></li>
        <li><a href="#the-pattern-string"><strong>The pattern string</strong></a></li>
        <li><a href="#function-getopt_long">Function <code>getopt_long()</code></a></li>
      </ul>
    </li>
    <li><a href="#advanced-arguments-parser">Advanced arguments parser</a></li>
  </ul>
</nav>
        </div>
    </section>

            
        
            
                
<section class="widget curTags">
    <div class="widget-icon">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11 3L20 12a1.5 1.5 0 0 1 0 2L14 20a1.5 1.5 0 0 1 -2 0L3 11v-4a4 4 0 0 1 4 -4h4" />
  <circle cx="9" cy="9" r="2" />
</svg>



    </div>
    <h2 class="widget-title section-title">Tags of current blog</h2>
    <div class="curTags-tags">
        
            <a href="/xingfen-star.github.io/tags/c%E8%AF%AD%E8%A8%80/">
                cËØ≠Ë®Ä
            </a>
        
    </div>
</section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/xingfen-star.github.io/categories/program/" style="background-color: #2a9d8f; color: #fff;">
                ÁºñÁ®ã
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/xingfen-star.github.io/post/c-getopt_h-analysis/">How to parse arguments using getopt.h</a>
        </h2>

        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Jan 22, 2025</time>
            </div>
        

        
        <div class="article-lastmod">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time>
                    Jan 08, 2026 09:59 UTC
                </time>
            </div>
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    10 minute read
                </time>
            </div>
        

    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h2 id="introduction-to-getopth">Introduction to <code>getopt.h</code>
</h2><p><code>getopt.h</code> is an embedded library of c language to handle command line arguments. It&rsquo;s function can be accessed by calling the two functions below:</p>
<ul>
<li>
<p><code>getopt()</code></p>
</li>
<li>
<p><code>getopt_long()</code></p>
</li>
</ul>
<h3 id="function-getopt">Function <code>getopt()</code>
</h3><p>Function <code>getopt()</code>  is used to parse instructions which have only short options like <code>-g</code>, <code>-o</code>, <code>-f</code>.</p>
<h4 id="example-program-of-getopt">Example program of <code>getopt()</code>
</h4><p>The arguments-handling framework using <code>getopt()</code> is basicly below:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;getopt.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">opt</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/* parse the command line input */</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="p">((</span><span class="n">opt</span> <span class="o">=</span> <span class="nf">getopt</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">,</span> <span class="s">&#34;f:o:kh&#34;</span><span class="p">))</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">switch</span> <span class="p">(</span><span class="n">opt</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">case</span> <span class="sc">&#39;f&#39;</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;Arg -f: %s</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">optarg</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">case</span> <span class="sc">&#39;o&#39;</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;Arg -o: %s</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">optarg</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">case</span> <span class="sc">&#39;k&#39;</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;Arg -k do not need arguments:%s</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">optarg</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">case</span> <span class="sc">&#39;h&#39;</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;Arg -k do not need arguments:%s</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">optarg</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">case</span> <span class="sc">&#39;?&#39;</span><span class="o">:</span> <span class="c1">// An invalid option was found or a required argument is missing.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">if</span> <span class="p">(</span><span class="n">optopt</span> <span class="o">==</span> <span class="sc">&#39;f&#39;</span> <span class="o">||</span> <span class="n">optopt</span> <span class="o">==</span> <span class="sc">&#39;o&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;Option -%c requires an argument.</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">optopt</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;Unknown option -%c.</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">optopt</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">default</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;Unexpected situation.</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/* extra arguments handling */</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">optind</span> <span class="o">&lt;</span> <span class="n">argc</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;Remaining arguments: &#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(;</span> <span class="n">optind</span> <span class="o">&lt;</span> <span class="n">argc</span><span class="p">;</span> <span class="n">optind</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;%s &#34;</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="n">optind</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="cm">/* optind &lt; argc */</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>compile and run the executable file with instruction: <code>./test_short.out -v yuanshen -f arg:f -o arg:o -k arg:k -h arg:h</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-plaintext" data-lang="plaintext"><span class="line"><span class="cl">&gt; ./test_short.out -v yuanshen -f arg:f -o arg:o -k arg:k -h arg:h
</span></span><span class="line"><span class="cl">./test_short.out: invalid option -- &#39;v&#39;
</span></span><span class="line"><span class="cl">Invalid option: v
</span></span><span class="line"><span class="cl">Arg -f: arg:f
</span></span><span class="line"><span class="cl">Arg -o: arg:o
</span></span><span class="line"><span class="cl">Arg -k do not need arguments:(null)
</span></span><span class="line"><span class="cl">Arg -k do not need arguments:(null)
</span></span><span class="line"><span class="cl">Remaining arguments: yuanshen arg:k arg:h %
</span></span></code></pre></div><h4 id="detailed-introduction-to-getopt">Detailed introduction to <code>getopt()</code>
</h4><h5 id="the-global-variables">The global variables
</h5><div class="table-wrapper"><table>
<thead>
<tr>
<th>global variables</th>
<th>usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>optopt (int)</td>
<td>It is set when an unknown option or an option lacking the necessary parameters is encountered; it stores the option character that caused the error.</td>
</tr>
<tr>
<td>optarg (char *)</td>
<td>It is used to store the value of the current option&rsquo;s argument. When parsing an option that requires an argument (for example, <code>file.txt</code>¬†in <code>-f file.txt</code>), optarg will point to this argument string.</td>
</tr>
<tr>
<td>optind (int)</td>
<td>It is used to track the position during the process of parsing command-line arguments, specifically indicating the index of the next argument to be processed.</td>
</tr>
</tbody>
</table></div>
<p>Ignoring the input sequence of these argumentsÔºå The code block blow will print all the arguments not recognized by the <code>getopt()</code> function.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl">    <span class="cm">/* extra arguments handling */</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">optind</span> <span class="o">&lt;</span> <span class="n">argc</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;Remaining arguments: &#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(;</span> <span class="n">optind</span> <span class="o">&lt;</span> <span class="n">argc</span><span class="p">;</span> <span class="n">optind</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;%s &#34;</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="n">optind</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="cm">/* optind &lt; argc */</span>
</span></span></code></pre></div><h3 id="the-pattern-string"><strong>The pattern string</strong>
</h3><p>The defination is <code>const char *__shortopts</code>, in the example program, it&rsquo;s instance is <code>&quot;f:o:kh&quot;</code>.</p>
<p>Just as the name <code>__shortopts</code> shows, the pattern string defines the short options that will be recognized in the <code>getopt()</code> and <code>getopt_long()</code> function. The colon <code>:</code> follows a short option character refers that this option requests for an argument.</p>
<p>Take <code>&quot;f:o:kh&quot;</code> as an example, this pattern string receives 4 options. options <code>-f</code> and <code>-o</code> request an argument input, while options <code>-k</code> and <code>-h</code> not.</p>
<p><strong>NOTE:</strong> if <code>-f</code> is followed with an option, the following option will be regarded as an argument.</p>
<h3 id="function-getopt_long">Function <code>getopt_long()</code>
</h3><p>Function <code>getopt_long()</code> is used to parse instructions which have both short options like <code>-g</code>, <code>-o</code>, <code>-f</code> and long options like <code>--version</code>, <code>--input</code>.</p>
<p>The function <code>getopt_long</code> recognizes an array of <code>struct option</code>, which defines the information of long options.</p>
<p>The prototype of <code>struct option</code> and related introduction are below:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="k">struct</span> <span class="n">option</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">;</span>   <span class="cm">/* the name of long option */</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">has_arg</span><span class="p">;</span><span class="err">¬†¬†¬†¬†¬†¬†¬†¬†</span><span class="cm">/* whether this option request an argument */</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="o">*</span><span class="n">flag</span><span class="p">;</span>          <span class="cm">/* if this option are provided by user, *flag will be assigned the value of @val */</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">val</span><span class="p">;</span>            <span class="cm">/* bind long option with short option or the value to assign to @*flag */</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>Field <code>has_arg</code> has two valid values, which are macros between <code>no_argument</code> and <code>required_argument</code>.</p>
<p>If field <code>flag</code> is not provided, then the field <code>val</code> will be regarded as the short option bound with current long option.</p>
<p>While the field <code>flag</code> is provided the field <code>val</code> will be assigned to <code>*flag</code> when the current long option is provided by user.</p>
<h4 id="elaboration-with-an-instance">Elaboration with an instance
</h4><p>Now we use instance with <code>struct option</code> array and pattern string to elaborate.</p>
<p>The instance of <code>struct option</code> array and pattern string:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cm">/* the corresponding pattern string */</span>
</span></span><span class="line"><span class="cl"><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">pattern</span> <span class="o">=</span> <span class="s">&#34;suR:&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="n">option</span> <span class="n">long_options</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/* long option only */</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/* with flag set - 1 */</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="s">&#34;onlyset1&#34;</span><span class="p">,</span>   <span class="n">no_argument</span><span class="p">,</span>        <span class="o">&amp;</span><span class="n">onlyset1</span><span class="p">,</span>      <span class="mi">1</span>   <span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/* long option only */</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/* with flag set - 2 */</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="s">&#34;onlyset2&#34;</span><span class="p">,</span>   <span class="n">no_argument</span><span class="p">,</span>        <span class="o">&amp;</span><span class="n">onlyset1</span><span class="p">,</span>      <span class="mi">2</span>   <span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/* long option only */</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/* with flag set - 3 */</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="s">&#34;onlyset3&#34;</span><span class="p">,</span>   <span class="n">no_argument</span><span class="p">,</span>        <span class="o">&amp;</span><span class="n">onlyset2</span><span class="p">,</span>      <span class="mi">3</span>   <span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/* long option only ( bind failed ) */</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/* with flag set, with val bind */</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="s">&#34;setbind&#34;</span><span class="p">,</span>    <span class="n">no_argument</span><span class="p">,</span>        <span class="o">&amp;</span><span class="n">setbind_flag</span><span class="p">,</span>  <span class="sc">&#39;s&#39;</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/* short and long option */</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/* without flag set, with val bind */</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="s">&#34;unsetbind&#34;</span><span class="p">,</span>  <span class="n">no_argument</span><span class="p">,</span>        <span class="nb">NULL</span><span class="p">,</span>           <span class="sc">&#39;u&#39;</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/* short and long option */</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/* require argument */</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="s">&#34;RequireArg&#34;</span><span class="p">,</span> <span class="n">required_argument</span><span class="p">,</span>  <span class="nb">NULL</span><span class="p">,</span>           <span class="sc">&#39;R&#39;</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>Considering both short and long options, when referring to the options for a certain function, there might be three possible situations, which are listed below.</p>
<ul>
<li>
<p>short option only</p>
</li>
<li>
<p>long option only</p>
</li>
<li>
<p>short and long option both</p>
</li>
</ul>
<p>Combine the pattern string and <code>struct option</code> array, the options that the program receives are:</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th style="text-align:center">short option</th>
<th style="text-align:center">long option</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">&ndash;onlyset1</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">&ndash;onlyset2</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">&ndash;onlyset3</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">&ndash;setbind</td>
</tr>
<tr>
<td style="text-align:center">-s</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">-u</td>
<td style="text-align:center">&ndash;unsetbind</td>
</tr>
<tr>
<td style="text-align:center">-R</td>
<td style="text-align:center">&ndash;RequireArg</td>
</tr>
</tbody>
</table></div>
<p>The options <code>-s</code> and <code>--setbind</code> are not bound together, because the field <code>flag</code> is provided in the element corresponding <code>&quot;setbind&quot;</code>.</p>
<h4 id="conflict-argument-require">Conflict argument require
</h4><p>There exists mutiple defination of argument require in both short and long options. Consequently, conflicts may occur.</p>
<p>we use a instance to elaborate:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cm">/* the corresponding pattern string */</span>
</span></span><span class="line"><span class="cl"><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">pattern</span> <span class="o">=</span> <span class="s">&#34;c:d&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="n">option</span> <span class="n">long_options</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/* short and long option */</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/* conflict argument require - 1 */</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="s">&#34;Conflict1&#34;</span><span class="p">,</span>  <span class="n">no_argument</span><span class="p">,</span>        <span class="nb">NULL</span><span class="p">,</span>           <span class="sc">&#39;c&#39;</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/* short and long option */</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/* conflict argument require - 2 */</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="s">&#34;Conflict2&#34;</span><span class="p">,</span>  <span class="n">required_argument</span><span class="p">,</span>  <span class="nb">NULL</span><span class="p">,</span>           <span class="sc">&#39;d&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/* end of the array ( all zero ) */</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="mi">0</span><span class="p">,</span>            <span class="mi">0</span><span class="p">,</span>                  <span class="mi">0</span><span class="p">,</span>              <span class="mi">0</span>   <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>We can see the given program above bind a required-arg short option <code>-c</code> with a non-arg long option <code>--Conflict1</code>.</p>
<p>And bind a non-arg short option <code>-d</code> with a required-arg long option <code>--Conflict2</code>.</p>
<p>This program runs well, but the configure about argument will take effects, too.</p>
<p>When the user provide <code>-c</code> or <code>--Conflict1</code>, the program will enter the same branch, but <code>--Conflict1</code> will not read the following argument, while <code>-c</code> does.</p>
<p>When the user provide <code>-d</code> or <code>--Conflict2</code>, the result will reverse.</p>
<h4 id="example-program-of-getopt_long">Example program of <code>getopt_long()</code>
</h4><p>The arguments-handling framework using <code>getopt()</code> is basicly below:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;getopt.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cm">/* test instructions:
</span></span></span><span class="line"><span class="cl"><span class="cm">    ./test_long.out --onlyset1 --onlyset2 --onlyset3
</span></span></span><span class="line"><span class="cl"><span class="cm">    ./test_long.out -s --setbind
</span></span></span><span class="line"><span class="cl"><span class="cm">    ./test_long.out --unsetbind --RequireArg arg:RequireArg
</span></span></span><span class="line"><span class="cl"><span class="cm">    ./test_long.out -u -R arg:R
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">    ./test_long.out -c arg:c -d arg:d
</span></span></span><span class="line"><span class="cl"><span class="cm">    ./test_long.out --Conflict1 arg:Conflict1 --Conflict2 arg:Conflict2
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">    ./test_long.out -c arg:c --Conflict1 arg:Conflict1
</span></span></span><span class="line"><span class="cl"><span class="cm">    ./test_long.out --Conflict1 arg:Conflict1 -c arg:c
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">opt</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">onlyset1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">onlyset2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">setbind_flag</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="n">option</span> <span class="n">long_options</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="cm">/* long option only */</span>
</span></span><span class="line"><span class="cl">        <span class="cm">/* with flag set - 1 */</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span> <span class="s">&#34;onlyset1&#34;</span><span class="p">,</span>   <span class="n">no_argument</span><span class="p">,</span>        <span class="o">&amp;</span><span class="n">onlyset1</span><span class="p">,</span>      <span class="mi">1</span>   <span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="cm">/* long option only */</span>
</span></span><span class="line"><span class="cl">        <span class="cm">/* with flag set - 2 */</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span> <span class="s">&#34;onlyset2&#34;</span><span class="p">,</span>   <span class="n">no_argument</span><span class="p">,</span>        <span class="o">&amp;</span><span class="n">onlyset1</span><span class="p">,</span>      <span class="mi">2</span>   <span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="cm">/* long option only */</span>
</span></span><span class="line"><span class="cl">        <span class="cm">/* with flag set - 3 */</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span> <span class="s">&#34;onlyset3&#34;</span><span class="p">,</span>   <span class="n">no_argument</span><span class="p">,</span>        <span class="o">&amp;</span><span class="n">onlyset2</span><span class="p">,</span>      <span class="mi">3</span>   <span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="cm">/* long option only ( bind failed ) */</span>
</span></span><span class="line"><span class="cl">        <span class="cm">/* with flag set, with val bound */</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span> <span class="s">&#34;setbind&#34;</span><span class="p">,</span>    <span class="n">no_argument</span><span class="p">,</span>        <span class="o">&amp;</span><span class="n">setbind_flag</span><span class="p">,</span>  <span class="sc">&#39;s&#39;</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="cm">/* short and long option */</span>
</span></span><span class="line"><span class="cl">        <span class="cm">/* without flag set, with val bound */</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span> <span class="s">&#34;unsetbind&#34;</span><span class="p">,</span>  <span class="n">no_argument</span><span class="p">,</span>        <span class="nb">NULL</span><span class="p">,</span>           <span class="sc">&#39;u&#39;</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="cm">/* short and long option */</span>
</span></span><span class="line"><span class="cl">        <span class="cm">/* require argument */</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span> <span class="s">&#34;RequireArg&#34;</span><span class="p">,</span> <span class="n">required_argument</span><span class="p">,</span>  <span class="nb">NULL</span><span class="p">,</span>           <span class="sc">&#39;R&#39;</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="cm">/* short and long option */</span>
</span></span><span class="line"><span class="cl">        <span class="cm">/* conflict argument require - 1 */</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span> <span class="s">&#34;Conflict1&#34;</span><span class="p">,</span>  <span class="n">no_argument</span><span class="p">,</span>        <span class="nb">NULL</span><span class="p">,</span>           <span class="sc">&#39;c&#39;</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="cm">/* short and long option */</span>
</span></span><span class="line"><span class="cl">        <span class="cm">/* conflict argument require - 2 */</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span> <span class="s">&#34;Conflict2&#34;</span><span class="p">,</span>  <span class="n">required_argument</span><span class="p">,</span>  <span class="nb">NULL</span><span class="p">,</span>           <span class="sc">&#39;d&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="cm">/* end of the array ( all zero ) */</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span> <span class="mi">0</span><span class="p">,</span>            <span class="mi">0</span><span class="p">,</span>                  <span class="mi">0</span><span class="p">,</span>              <span class="mi">0</span>   <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">long_index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="p">((</span><span class="n">opt</span> <span class="o">=</span> <span class="nf">getopt_long</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">,</span> <span class="s">&#34;suR:c:d&#34;</span><span class="p">,</span> <span class="n">long_options</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">long_index</span><span class="p">))</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">switch</span> <span class="p">(</span><span class="n">opt</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">case</span> <span class="mi">0</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                <span class="cm">/* provide long option with flag set */</span>
</span></span><span class="line"><span class="cl">                <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;long option with flag set recognized!</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;long option name is %s</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">long_options</span><span class="p">[</span><span class="n">long_index</span><span class="p">].</span><span class="n">name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">long_options</span><span class="p">[</span><span class="n">long_index</span><span class="p">].</span><span class="n">flag</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;the flag value is %d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="o">*</span><span class="p">(</span><span class="n">long_options</span><span class="p">[</span><span class="n">long_index</span><span class="p">].</span><span class="n">flag</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">case</span> <span class="sc">&#39;s&#39;</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                <span class="cm">/* provide option -s instead of --setbind */</span>
</span></span><span class="line"><span class="cl">                <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;long option (short option only), with flag set, with val bound.</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;setbind_flag == %d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">setbind_flag</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">case</span> <span class="sc">&#39;u&#39;</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                <span class="cm">/* provide option -u and --unsetbind */</span>
</span></span><span class="line"><span class="cl">                <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;long option, without flag set, with val bound.</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">case</span> <span class="sc">&#39;R&#39;</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                <span class="cm">/* provide option -R and --RequireArg */</span>
</span></span><span class="line"><span class="cl">                <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;long option require argument.</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;the argument: %s</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">optarg</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">case</span> <span class="sc">&#39;c&#39;</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                <span class="cm">/* -c require an argument while --Conflict1 not */</span>
</span></span><span class="line"><span class="cl">                <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;conflict argument require - 1</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;the argument: %s</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">optarg</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">case</span> <span class="sc">&#39;d&#39;</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                <span class="cm">/* --Conflict2 require an argument while -d not */</span>
</span></span><span class="line"><span class="cl">                <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;conflict argument require - 2</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;the argument: %s</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">optarg</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">case</span> <span class="sc">&#39;?&#39;</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                <span class="cm">/* Unrecognized option or missing argument */</span>
</span></span><span class="line"><span class="cl">                <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;Unknown option or missing argument.</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/* Process remaining non-option arguments */</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">optind</span><span class="p">;</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="n">argc</span><span class="p">;</span> <span class="n">index</span><span class="o">++</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;Non-option argument %s</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="n">index</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h5 id="run-and-analyse-the-test-result-of-getopt_long">Run and analyse the test result of <code>getopt_long()</code>
</h5><p>We design these instructions to test the program.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">./test_long.out --onlyset1 --onlyset2 --onlyset3
</span></span><span class="line"><span class="cl">./test_long.out -s --setbind
</span></span><span class="line"><span class="cl">./test_long.out --unsetbind --RequireArg arg:RequireArg
</span></span><span class="line"><span class="cl">./test_long.out -u -R arg:R
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">./test_long.out -c arg:c -d arg:d
</span></span><span class="line"><span class="cl">./test_long.out --Conflict1 arg:Conflict1 --Conflict2 arg:Conflict2
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">./test_long.out -c arg:c --Conflict1 arg:Conflict1
</span></span><span class="line"><span class="cl">./test_long.out --Conflict1 arg:Conflict1 -c arg:c
</span></span></code></pre></div><p>The results are as follows:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-plaintext" data-lang="plaintext"><span class="line"><span class="cl">&gt; ./test_long.out --onlyset1 --onlyset2 --onlyset3
</span></span><span class="line"><span class="cl">long option with flag set recognized!
</span></span><span class="line"><span class="cl">long option name is onlyset1
</span></span><span class="line"><span class="cl">the flag value is 1
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">long option with flag set recognized!
</span></span><span class="line"><span class="cl">long option name is onlyset2
</span></span><span class="line"><span class="cl">the flag value is 2
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">long option with flag set recognized!
</span></span><span class="line"><span class="cl">long option name is onlyset3
</span></span><span class="line"><span class="cl">the flag value is 3
</span></span></code></pre></div><p>This instruction <code>./test_long.out --onlyset1 --onlyset2 --onlyset3</code> demonstrates the basic functionality of <code>getopt_long()</code>. It modifies the value at the address <code>flag</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-plaintext" data-lang="plaintext"><span class="line"><span class="cl">&gt; ./test_long.out -s --setbind
</span></span><span class="line"><span class="cl">long option (short option only), with flag set, with val bound.
</span></span><span class="line"><span class="cl">setbind_flag == 0
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">long option with flag set recognized!
</span></span><span class="line"><span class="cl">long option name is setbind
</span></span><span class="line"><span class="cl">the flag value is 115
</span></span></code></pre></div><p>The instruction <code>./test_long.out -s --setbind</code> demonstrates a failure in binding (when the <code>flag</code> field is set). <code>--setbind</code> and <code>-s</code> enter different branches.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-plaintext" data-lang="plaintext"><span class="line"><span class="cl">&gt; ./test_long.out --unsetbind --RequireArg arg:RequireArg
</span></span><span class="line"><span class="cl">long option, without flag set, with val bound.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">long option require argument.
</span></span><span class="line"><span class="cl">the argument: arg:RequireArg
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&gt; ./test_long.out -u -R arg:R
</span></span><span class="line"><span class="cl">long option, without flag set, with val bound.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">long option require argument.
</span></span><span class="line"><span class="cl">the argument: arg:R
</span></span></code></pre></div><p>This comparison shows the result of successful binding (when the <code>flag</code> field is not set). <code>--unsetbind</code> and <code>-u</code> are bound together and enter the same branch. Similarly, <code>--RequireArg</code> and <code>-R</code> are bound together.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-plaintext" data-lang="plaintext"><span class="line"><span class="cl">&gt; ./test_long.out -c arg:c -d arg:d
</span></span><span class="line"><span class="cl">conflict argument require - 1
</span></span><span class="line"><span class="cl">the argument: arg:c
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">conflict argument require - 2
</span></span><span class="line"><span class="cl">the argument: (null)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Non-option argument arg:d
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&gt; ./test_long.out --Conflict1 arg:Conflict1 --Conflict2 arg:Conflict2
</span></span><span class="line"><span class="cl">conflict argument require - 1
</span></span><span class="line"><span class="cl">the argument: (null)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">conflict argument require - 2
</span></span><span class="line"><span class="cl">the argument: arg:Conflict2
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Non-option argument arg:Conflict1
</span></span></code></pre></div><p>This comparison illustrates the conflict of argument requirements. <code>-c</code> and <code>--Conflict1</code> are bound together, but <code>-c</code> requires an argument. <code>-d</code> and <code>--Conflict2</code> are bound together, but <code>--Conflict2</code> requires an argument.</p>
<p>The results show that the bound options enter the same branch. However, the arguments are either read or ignored based on whether the option provided by the user requires an argument.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-plaintext" data-lang="plaintext"><span class="line"><span class="cl">&gt; ./test_long.out -c arg:c --Conflict1 arg:Conflict1
</span></span><span class="line"><span class="cl">conflict argument require - 1
</span></span><span class="line"><span class="cl">the argument: arg:c
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">conflict argument require - 1
</span></span><span class="line"><span class="cl">the argument: (null)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Non-option argument arg:Conflict1
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&gt; ./test_long.out --Conflict1 arg:Conflict1 -c arg:c
</span></span><span class="line"><span class="cl">conflict argument require - 1
</span></span><span class="line"><span class="cl">the argument: (null)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">conflict argument require - 1
</span></span><span class="line"><span class="cl">the argument: arg:c
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Non-option argument arg:Conflict1
</span></span></code></pre></div><p>Here, we observe another result of conflict options.</p>
<h2 id="advanced-arguments-parser">Advanced arguments parser
</h2>
</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/xingfen-star.github.io/tags/c%E8%AF%AD%E8%A8%80/">cËØ≠Ë®Ä</a>
        
    </section>


    <section class="article-lastmod">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



        <span>
            Last updated on Jan 08, 2026 09:59 UTC
        </span>
    </section></footer>


    
</article>

    

    


    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy;
        
            2025 -
        
        2026 ËøúÊ•í
    </section>

    <section class="powerby">
        
            ÊòüËóèÁÇπÈõ™ÔºåÊúàÈöêÊô¶Êòé <br/>
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.29.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link
                rel="stylesheet"
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link
                rel="stylesheet"
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/xingfen-star.github.io/ts/main.3e0587bea8834cd3d9d3020bdfadb3d6ef435900c301cfd4c0ffaa0825b9b711.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>
<style>
    #TableOfContents > ul, ol {
        ul, ol {
            display: none;
        }
        .open {
            display: block;
        }
    }
</style>

<script>
    function initTocHide() {
        
        let toc = document.querySelector(".widget--toc");
        if (!toc) {
            return;
        }
        
        window.addEventListener('scroll', function() {
            
            let currentLi = document.querySelector(".active-class");
            if (!currentLi) {
                return
            }
            
            let elementsByClassName = document.querySelectorAll(".open");
            if (elementsByClassName.length > 0) {
                elementsByClassName.forEach((ul) => {
                    ul.classList.remove("open")
                })
            }
            
            if (currentLi.children.length > 1) {
                currentLi.children[1].classList.add("open")
            }
            
            let ul = currentLi.parentElement;
            do {
                ul.classList.add("open");
                ul = ul.parentElement.parentElement
            } while (ul !== undefined && (ul.localName === 'ul' || ul.localName === 'ol'))
        });
    }
    initTocHide()
</script>

    </body>
</html>
